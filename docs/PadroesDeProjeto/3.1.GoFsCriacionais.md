# 3.1. GoFs Criacionais

## Sum√°rio
- [3.1. GoFs Criacionais](#31-gofs-criacionais)
  - [Sum√°rio](#sum√°rio)
  - [Metodologia](#metodologia)
  - [Diagramas](#diagramas)
    - [Factory Method:](#factory-method)
    - [Builder:](#builder)
    - [Singleton](#singleton)
  - [C√≥digo](#c√≥digo)
    - [Imagens do builder](#imagens-do-builder)
    - [Imagens do Factory](#imagens-do-factory)
  - [C√≥digo rodando](#c√≥digo-rodando)
    - [Factory Method](#factory-method-1)
    - [Builder](#builder-1)
    - [Singleton](#singleton-1)
  - [Conclus√£o](#conclus√£o)
  - [Refer√™ncias](#refer√™ncias)
    - [üîß Padr√µes Criacionais](#-padr√µes-criacionais)
    - [üéì Material da Professora](#-material-da-professora)
  - [Hist√≥rico de Vers√µes](#hist√≥rico-de-vers√µes)

---

## Metodologia

Com base nos artefatos previamente produzidos e nos requisitos levantados durante o planejamento da disciplina, foi realizada uma an√°lise dos padr√µes de projeto GoF criacionais **([Ata de Reuni√£o [27/05]](https://unbbr-my.sharepoint.com/:w:/g/personal/211062947_aluno_unb_br/EYgCQ6DBuxxGpyXkuWrLLSwBZ922m-fQ1p4DgNH41q6s8A?e=aWe77D))**, com o objetivo de identificar sua aplicabilidade aos componentes da aplica√ß√£o. Ap√≥s essa avalia√ß√£o, o grupo identificou os seguintes padr√µes e suas respectivas implementa√ß√µes:

- **Factory Method - Adapta√ß√£o**: Utilizado no processo de registro de usu√°rios, o padr√£o Factory Method foi adotado para permitir a cria√ß√£o flex√≠vel e extens√≠vel de diferentes tipos de contas. Essa abordagem facilita a adi√ß√£o de novos pap√©is ou perfis de usu√°rio no futuro, promovendo um baixo acoplamento e alta coes√£o na l√≥gica de cria√ß√£o. 
  - [**Implementa√ß√£o - Registro de Usu√°rios**](https://github.com/UnBArqDsw2025-1-Turma01/2025.1-T01-_G7_FCTEPodcast/tree/main/fctepodcast-backend/src/factory/usuario)

- **Builder - Adapta√ß√£o**: Aplicado na constru√ß√£o de objetos relacionados ao registro de podcasts e epis√≥dios, o padr√£o Builder foi escolhido para lidar com a complexidade da cria√ß√£o dessas entidades, que envolvem campos textuais, verifica√ß√£o de informa√ß√µes e campos de arquivos (Imagens e √Åudio), os tornando classes dif√≠ceis de serem construidas. O uso desse padr√£o permite montar objetos passo a passo de maneira mais leg√≠vel, modular e com menor risco de erros.
  - [**Implementa√ß√£o - PodcastBuilder**](https://github.com/UnBArqDsw2025-1-Turma01/2025.1-T01-_G7_FCTEPodcast/tree/main/fctepodcast-backend/src/builder/Episodio)
  - [**Implementa√ß√£o - EpisodioBuilder**](https://github.com/UnBArqDsw2025-1-Turma01/2025.1-T01-_G7_FCTEPodcast/blob/main/fctepodcast-backend/src/builder/Podcast/PodcastBuilder.ts)
 
- **Singleton - Adapta√ß√£o**: O padr√£o Singleton foi empregado para garantir que determinadas classes essenciais da aplica√ß√£o possuam apenas uma inst√¢ncia ativa durante toda a execu√ß√£o, assegurando consist√™ncia e economia de recursos. 
  - [**Implementa√ß√£o - Conex√£oco com o Banco de Dados**](https://github.com/UnBArqDsw2025-1-Turma01/2025.1-T01-_G7_FCTEPodcast/tree/main/fctepodcast-backend/src/builder)
  - [**Implementa√ßao - Sistema de autentica√ß√£o**](https://github.com/UnBArqDsw2025-1-Turma01/2025.1-T01-_G7_FCTEPodcast/blob/main/fctepodcast-frontend/src/context/auth/AuthContext.tsx)
  - [**Implementa√ß√£o - Sistema de reprodu√ß√£o de √°udio**](https://github.com/UnBArqDsw2025-1-Turma01/2025.1-T01-_G7_FCTEPodcast/blob/main/fctepodcast-frontend/src/context/player/PlayerContext.tsx)

A partir dessa an√°lise, os sistemas mencionados foram desenvolvidos seguindo os princ√≠pios desses padr√µes, adaptando suas estruturas √†s tecnologias utilizadas no projeto: **TypeScript, Express.js e React.js**.


## Diagramas

### Factory Method:
![Diagrama do Factory Method](./_media/factory_method.png)

### Builder:
- Diagrama do Builder de Epis√≥dio
![Diagrama do Builder de epis√≥dio](./_media/episodio_builder.png)

- Diagrama do Builder de Podcast
![Diagrama do Builder de Podcast](_media/podcast_builder.png)

### Singleton
![Diagrama do Singleton](_media/singleton.png)

## C√≥digo
### Imagens do builder

![ConcreteEpisodioBuilder](_media/Builder/Builder/ConcreteEpisodioBuilder.png)

A classe apresentada na imagem acima implementa interface 'EpisodioBuilder' com a l√≥gica espec√≠fica para constru√ß√£o de um epis√≥dio. Ela garante que todos os campos necess√°rios (t√≠tulo, descri√ß√£o, audio_path, podcast_reference) sejam corretamente preenchidos, com valida√ß√µes claras e erros acess√≠veis, especialmente importantes em contexto de APIs com TypeScript e ExpressJS.

Em vez de construir objetos complexos com m√©todos de neg√≥cio, como em padr√µes tradicionais de dom√≠nio, adaptamos o padr√£o Builder (GoF - Criacional) para gerar DTOs simples, adequados ao uso com frameworks web como ExpressJS, onde os objetos s√£o estruturados para transporte e valida√ß√£o de dados, e n√£o para comportamentos complexos.

As valida√ß√µes lan√ßam erros diretos com mensagens claras, pensando na usabilidade via HTTP/JSON ‚Äî facilitando a comunica√ß√£o com o cliente que consome a API.


![EpisodioBuilderInterface](_media/Builder/Builder/EpisodioBuilderInterface.png)

A interface EpisodioBuilder define o contrato necess√°rio para a constru√ß√£o de um epis√≥dio, permitindo a cria√ß√£o de diferentes implementa√ß√µes de construtores que sigam a mesma estrutura. Isso oferece flexibilidade e extensibilidade ao sistema, pois o c√≥digo que consome o builder pode utilizar qualquer implementa√ß√£o sem precisar conhecer seus detalhes internos.

Esse design favorece a separa√ß√£o de responsabilidades e promove a reutiliza√ß√£o de l√≥gica de constru√ß√£o em diferentes contextos (por exemplo, cria√ß√£o via API, testes, importa√ß√µes externas etc.).

![EpisodioDTO](_media/Builder/Builder/EpisodioDTO.png)

O EpisodioDTO √© um Data Transfer Object, usado para transportar dados essenciais de um epis√≥dio ‚Äî como t√≠tulo, descri√ß√£o, caminho do √°udio e refer√™ncia ao podcast ‚Äî entre diferentes camadas da aplica√ß√£o. Ele representa uma estrutura simples, sem l√≥gica de neg√≥cios, garantindo que os dados sejam consistentes, f√°ceis de manipular e prontos para serializa√ß√£o e desserializa√ß√£o em comunica√ß√µes HTTP (como em APIs REST).

![ConcreteEpisodioBuilder](_media/Builder/Builder/ConcreteEpisodioBuilder.png)

A classe ConcreteEpisodioBuilder √© uma implementa√ß√£o concreta da interface EpisodioBuilder, respons√°vel por construir objetos do tipo EpisodioDTO de maneira controlada e validada. Essa classe segue o padr√£o de projeto Builder, mas foi adaptada ao contexto do TypeScript e do ExpressJS, levando em considera√ß√£o pr√°ticas comuns no desenvolvimento de APIs modernas.

O principal objetivo da ConcreteEpisodioBuilder √© encapsular a l√≥gica necess√°ria para montar corretamente um objeto de epis√≥dio antes de exp√¥-lo √† aplica√ß√£o. Para isso, ela garante que todos os campos obrigat√≥rios estejam devidamente preenchidos, al√©m de realizar valida√ß√µes espec√≠ficas em cada etapa da constru√ß√£o. Dessa forma, evita-se que objetos inv√°lidos sejam propagados para outras camadas do sistema.

Algumas adapta√ß√µes importantes foram feitas para esse padr√£o funcionar bem com TypeScript e ExpressJS. Diferente da ideia cl√°ssica do padr√£o Builder, em que o ‚Äúproduto‚Äù √© um objeto complexo com m√©todos e l√≥gica pr√≥pria, aqui o produto √© um DTO (Data Transfer Object) ‚Äî um objeto simples, sem l√≥gica de neg√≥cios, que serve apenas para transportar dados entre camadas da aplica√ß√£o, especialmente via API. Essa simplifica√ß√£o √© ideal para aplica√ß√µes web que trabalham com requisi√ß√µes e respostas em formato JSON, pois facilita a serializa√ß√£o e a comunica√ß√£o com o cliente.

Al√©m disso, as valida√ß√µes foram adaptadas para lan√ßar erros com mensagens claras, facilitando o tratamento de erros em APIs. Isso √© especialmente √∫til no contexto do ExpressJS, onde √© importante que os retornos de erro sejam compreens√≠veis e bem formatados para quem consome a API.

![PodcastBuilder](_media/Builder/Builder/PodcastBuilder.png)

A interface PodcastBuilder define a estrutura necess√°ria para a constru√ß√£o de um objeto do tipo podcast. Ela atua como um contrato que estabelece os m√©todos que devem obrigatoriamente ser implementados por qualquer classe que deseje seguir o padr√£o de constru√ß√£o de podcasts no sistema.

![PodcastConcreteBuilder](_media/Builder/Builder/ConcretePodcastBuilder.png)

A classe ConcretePodcastBuilder √© uma implementa√ß√£o concreta da interface PodcastBuilder, sendo respons√°vel por construir objetos do tipo PodcastDTO com base em valida√ß√µes e preenchimentos controlados dos dados. 

Foram feitas adapta√ß√µes naturais para o contexto de TypeScript e ExpressJS, especialmente no uso de DTOs simples em vez de objetos mais complexos com m√©todos internos. Tamb√©m foram aplicadas pr√°ticas de valida√ß√£o com mensagens claras, o que √© crucial para aplica√ß√µes web, onde os erros precisam ser compreens√≠veis para os consumidores da API. Garantir que mensagens sejam acess√≠veis e bem formatadas em JSON √© essencial para a comunica√ß√£o entre cliente e servidor.

![PodcastDTO](_media/Builder/Builder/PodcastDTO.png)

O PodcastDTO √© um objeto do tipo Data Transfer Object utilizado para representar um podcast de forma simples e direta. Sua principal fun√ß√£o √© transportar os dados relacionados a um podcast entre diferentes partes do sistema, como, por exemplo, entre um builder que constr√≥i o objeto e um servi√ßo ou controlador que realiza opera√ß√µes com ele.

PodcastDTO n√£o possui m√©todos ou l√≥gica interna. Sua estrutura √© plana e voltada unicamente para o transporte de dados entre as camadas do sistema de forma segura, simples e eficiente.

### Imagens do Factory

![AlunoCreator](_media/Factory/Factory/AlunoCreator.png)

A classe AlunoCreator √© uma implementa√ß√£o concreta do padr√£o de projeto Factory Method, respons√°vel por criar inst√¢ncias do tipo Aluno. Ela herda da classe abstrata UsuarioCreator e implementa o m√©todo factoryMethod com a l√≥gica espec√≠fica para a cria√ß√£o de um usu√°rio do tipo aluno.

Essa abordagem permite que o sistema crie alunos sem precisar conhecer os detalhes da implementa√ß√£o, promovendo encapsulamento e flexibilidade na arquitetura.

![creatorRegistry](_media/Factory/Factory/creatorRegistry.png)

Esse trecho de c√≥digo mostra a cria√ß√£o de um registro de criadores de usu√°rios. Ele funciona como um mapeamento entre tipos de usu√°rios (como "PROFESSOR" e "ALUNO") e suas respectivas classes criadoras (ProfessorCreator, AlunoCreator), que s√£o respons√°veis por instanciar objetos do tipo usu√°rio.

A ideia principal √© permitir que o sistema consiga criar usu√°rios diferentes sem precisar saber os detalhes da implementa√ß√£o de cada tipo.

![ProfessorCreator](_media/Factory/Factory/ProfessorCreator.png)

A classe ProfessorCreator √© uma implementa√ß√£o concreta do padr√£o de projeto Factory Method, respons√°vel por criar usu√°rios do tipo Professor. Essa classe estende a classe abstrata UsuarioCreator e implementa o m√©todo factoryMethod, encapsulando a l√≥gica necess√°ria para instanciar um professor com seguran√ßa.

Essa estrutura permite a cria√ß√£o segura e modular de professores, mantendo os detalhes de implementa√ß√£o ocultos e respeitando os princ√≠pios da programa√ß√£o orientada a objetos.

![UsuarioCreator](_media/Factory/Factory/UsuarioCreator.png)

A classe UsuarioCreator √© uma classe abstrata que define a estrutura base para a cria√ß√£o de usu√°rios utilizando o padr√£o de projeto Factory Method.

Essa abordagem oferece flexibilidade e escalabilidade, pois facilita a adi√ß√£o de novos tipos de usu√°rios no futuro, bastando criar novas subclasses que estendam UsuarioCreator e implementem o factoryMethod de forma adequada.

## C√≥digo rodando

### Factory Method

Os v√≠deos a seguir apresentam o processo de cadastro de professores e alunos, implementado com o padr√£o de projeto Factory Method. As funcionalidades demonstradas j√° est√£o completamente integradas e operacionais na aplica√ß√£o.


<iframe width="560" height="315" src="https://www.youtube.com/embed/vg3Qd_EJwXs?si=HyPiuAc0W9VnRoa2" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

<iframe width="560" height="315" src="https://www.youtube.com/embed/qstn8yzQw7Q?si=Upxp2hgHkX--KTwM" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>


### Builder

Os v√≠deos abaixo ilustram as funcionalidades de cria√ß√£o de podcasts e epis√≥dios, desenvolvidas com base no padr√£o de projeto Builder. Todas as funcionalidades est√£o devidamente implementadas e em pleno funcionamento na aplica√ß√£o.

<iframe width="560" height="315" src="https://www.youtube.com/embed/naaPv6M2Ok4?si=I-B56bqxah425S_2" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

<iframe width="560" height="315" src="https://www.youtube.com/embed/sK8noxfeITo?si=u_9p8dy65NqgnfYT" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

### Singleton

Implementa√ß√µes do Padr√£o Singleton
A seguir, s√£o apresentadas as demonstra√ß√µes das inst√¢ncias √∫nicas (Singletons) utilizadas na aplica√ß√£o, na seguinte ordem:

- AuthContext: Respons√°vel pelo gerenciamento centralizado do estado de autentica√ß√£o do usu√°rio.

- Conex√£o com o Banco de Dados: Garante uma √∫nica inst√¢ncia de conex√£o ativa com o banco, otimizando o uso de recursos.

- Player de √Åudio: Controla a reprodu√ß√£o de √°udio na aplica√ß√£o. Al√©m de seguir o padr√£o Singleton, tamb√©m implementa o padr√£o Command, conforme detalhado na se√ß√£o [3.3. GoFs Comportamentais](#).

<iframe width="560" height="315" src="https://www.youtube.com/embed/wqeyG00EAQk?si=c55ytC-UIK8RqpVp" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

<iframe width="560" height="315" src="https://www.youtube.com/embed/TYi6XzoqHPs?si=3uSPyGqBv4hVRrui" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

<iframe width="560" height="315" src="https://www.youtube.com/embed/Ra1PAchKcGI?si=IaM64EEHks5P3psN" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

**Aten√ß√£o!** O √°udio do v√≠deo acima pode estar muito alto! Favor certifique-se de abaixo o √°udio do seu computador



## Conclus√£o

A aplica√ß√£o dos padr√µes de projeto Factory Method, Builder e Singleton no desenvolvimento do FCTEPodcast demonstrou-se altamente eficaz para organizar e estruturar a l√≥gica de cria√ß√£o.

O uso do Factory Method proporcionou uma maneira flex√≠vel de instanciar diferentes tipos de usu√°rios, como monitores e professores com base em suas fun√ß√µes espec√≠ficas, mantendo a l√≥gica de cria√ß√£o encapsulada e permitindo futuras expans√µes sem grandes altera√ß√µes na arquitetura central.

O padr√£o Builder foi essencial para lidar com a complexidade envolvida na cria√ß√£o de objetos como Podcast e Epis√≥dio, que exigem v√°rias valida√ß√µes e com ele, conseguimos uma constru√ß√£o passo a passo clara e segura.

J√° o Singleton garantiu que servi√ßos cr√≠ticos, como a conex√£o com o banco de dados, por exemplo, fossem gerenciados por inst√¢ncias √∫nicas e consistentes durante toda a execu√ß√£o da aplica√ß√£o, o que otimizou o uso de recursos e manteve o comportamento previs√≠vel dos componentes.

Al√©m de facilitar a manuten√ß√£o e escalabilidade, a ado√ß√£o consciente desses padr√µes tamb√©m contribuiu para a padroniza√ß√£o do desenvolvimento, melhorando a legibilidade do c√≥digo e a colabora√ß√£o entre os membros da equipe.

Portanto, o uso dos padr√µes criacionais no FCTEPodcast n√£o apenas agregou valor t√©cnico, mas tamb√©m proporcionou um ambiente mais organizado.

## Refer√™ncias

### üîß Padr√µes Criacionais

- [Refactoring Guru ‚Äì Design Patterns: Padr√µes Criacionais](https://refactoring.guru/design-patterns/creational-patterns)  

- [Refactoring Guru ‚Äì Builder Pattern](https://refactoring.guru/design-patterns/builder)  

- [Refactoring Guru ‚Äì Singleton Pattern](https://refactoring.guru/design-patterns/singleton)  

### üéì Material da Professora

- [Material de Apoio - UNB Moodle](https://aprender3.unb.br/mod/page/view.php?id=1372234)  
  P√°gina com material complementar utilizado em sala de aula sobre padr√µes de projeto.

---
## Hist√≥rico de Vers√µes

| Vers√£o |    Data    |        Descri√ß√£o         |    Autor(es)    |  Revisor(es)     |  Detalhes da Revis√£o  |  
| :----: | :--------: | :----------------------: | :-------------: | :----------------| :---------------------|
|  1.0   | 31/05/2025 |   Cria√ß√£o do documento   | Nat√°lia Rodrigues | Harleny A. | Arquiteura de pastas revisada |
|  1.1   | 31/05/2025 |   Adi√ß√£o de C√≥digos em imagens   | Gustavo C., Harleny A., Iderlan J., Rafael K. | Gustavo Costa de Jesus | Verifica√ß√£o de inser√ß√£o de imagens|
|  1.2   | 01/06/2025 | Adi√ß√£o da Metodologia | Gustavo Costa | 
|  1.2   | 01/06/2025 | Explica√ß√£o dos c√≥digos | Nat√°lia Rodrigues | 
|  1.3   | 01/06/2025 | Adicionando diagramas | Rafael Kenji |
|  1.4   | 01/06/2025 | Adicionando conclus√£o | Marcella Anderle | 
| 1.5  | 01/06/2025  | Adi√ß√£o de V√≠deos de demonstra√ß√£o | Gustavo C., Rafael K., Iderlan J., Marcella Anderle, Harleny A. |
| 1.6  | 01/06/2025  | Revis√£o dos textos | Nat√°lia Rodrigues, Gustavo Costa, Marcella Anderle|   Gustavo C., Rafael K., Iderlan J., Marcella Anderle, Harleny A. |  Revis√£o de todos os textos        | 
| 1.7  | 01/06/2025  | Revis√£o dos textos | Nat√°lia Rodrigues, Gustavo Costa, Marcella Anderle|   Gustavo C., Rafael K., Iderlan J., Marcella Anderle, Harleny A. |  Revis√£o de todos os textos        | 
|1.8|	02/06/2025	|Adi√ß√£o de Refer√™ncias| Harleny Ang√©llica|	Gustavo Costa|Texto Revisado |
| 1.9 | 02/06/2025 | Corre√ß√£o: Adicionando termos "Adapta√ß√£o" os GoFs que precisarem | Gustavo C. | | |